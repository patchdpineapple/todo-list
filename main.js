(()=>{"use strict";class e{constructor(e,t){this.name=e,this.id=t,this.tasks=[]}get name(){return this._name}set name(e){this._name=e}}class t{constructor(e,t,o,r){this.title=e,this.description=t,this.date=o,this.priority=r}get title(){return this._title}set title(e){this._title=e}get description(){return this._description}set description(e){this._description=e}get date(){return this._date}set date(e){this._date=e}get priority(){return this._priority}set priority(e){this._priority=e}}const o={projects:[]},r=function(){function e(e){const r=document.getElementById("todo_container");r.setAttribute("data-id",e);const c=document.createElement("div");c.classList.add("add_todo_wrapper"),c.classList.add("parent_wrapper"),c.setAttribute("data-id",r.getAttribute("data-id"));const n=document.createElement("p");n.classList.add("add_todo_label");const i=document.createElement("strong");i.textContent=o.projects[e]._name,n.append(i),c.append(n);const l=document.createElement("div");l.classList.add("add_todo_buttons_wrapper");const u=document.createElement("div");u.classList.add("add_todo_button"),u.classList.add("btn"),u.textContent="+new task",u.addEventListener("click",(()=>{document.querySelector(".add_todo_form").reset(),document.querySelector(".dim_screen_container").classList.remove("hide"),document.querySelector(".add_todo_form_container").classList.remove("hide")}));const p=document.createElement("div");p.classList.add("add_todo_delete_button"),p.classList.add("btn"),p.textContent="-",p.addEventListener("click",(e=>{const o=e.target.closest(".parent_wrapper").getAttribute("data-id");a(),document.querySelector(`.projects_item_wrapper[data-id="${o}"]`).remove(),s(o),t(),d.updateStorage()})),l.append(u),l.append(p),c.append(l),r.append(c)}function t(){document.getElementById("todo_container").setAttribute("data-id","all"),0===document.getElementById("todo_container").children.length&&console.log("displaying all tasks");const e=document.getElementById("todo_container"),t=document.createElement("div");t.classList.add("add_todo_wrapper");const d=document.createElement("p");d.classList.add("add_todo_label");const a=document.createElement("strong");a.textContent="All Tasks",d.append(a),t.append(d),e.append(t);for(let e=0;e<o.projects.length;e++)r(e)}function r(s){for(let c=0;c<o.projects[s].tasks.length;c++){const n=document.getElementById("todo_container"),i=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),m=document.createElement("img"),_=document.createElement("p"),g=document.createElement("p"),y=document.createElement("div"),k=document.createElement("img");switch(i.classList.add("todo_item_wrapper"),i.classList.add("parent_wrapper"),l.classList.add("todo_item_wrapper2"),u.classList.add("todo_item_wrapper3"),p.classList.add("todo_item_complete_button"),_.classList.add("todo_item_label"),g.classList.add("todo_item_date"),y.classList.add("todo_item_edit_button"),m.setAttribute("src","https://s.svgbox.net/hero-outline.svg?ic=badge-check&fill=000"),m.setAttribute("width","20"),m.setAttribute("height","20"),k.setAttribute("src","https://s.svgbox.net/hero-outline.svg?ic=dots-horizontal&fill=000"),k.setAttribute("width","32"),k.setAttribute("height","32"),_.textContent=o.projects[s].tasks[c]._title,g.textContent=o.projects[s].tasks[c]._date,o.projects[s].tasks[c]._priority){case"1":i.setAttribute("style","background-color: hsla(0, 100%, 50%, 0.7);");break;case"2":i.setAttribute("style","background-color: orange");break;case"3":i.setAttribute("style","background-color: yellow");break;case"4":i.setAttribute("style","background-color: white")}i.setAttribute("data-id",s),i.setAttribute("data-taskid",c),p.setAttribute("data-taskid",c),m.setAttribute("data-taskid",c),k.setAttribute("data-taskid",c),p.addEventListener("click",(o=>{const s=o.target.closest(".parent_wrapper").getAttribute("data-id"),c=o.target.closest(".todo_item_wrapper").getAttribute("data-taskid");console.log(s+" "+c),d.deleteTask(s,c),o.target.closest(".todo_item_wrapper").remove(),"all"==document.getElementById("todo_container").getAttribute("data-id")?(a(),t()):(console.log("not all"),a(),e(s),r(s)),d.updateStorage()})),_.addEventListener("click",(e=>{const t=e.target.closest(".parent_wrapper").getAttribute("data-id"),r=e.target.closest(".parent_wrapper").getAttribute("data-taskid");document.querySelector(".dim_screen_container").classList.remove("hide"),document.querySelector(".see_task_wrapper").classList.remove("hide"),document.querySelector(".see_project").textContent=`Project: ${o.projects[t]._name}`,document.querySelector(".see_name").textContent=o.projects[t].tasks[r]._title,document.querySelector(".see_description").textContent=o.projects[t].tasks[r]._description,document.querySelector(".see_date").textContent=o.projects[t].tasks[r]._date,document.querySelector(".see_priority").textContent=o.projects[t].tasks[r]._priority,document.querySelector(".see_task_wrapper").setAttribute("data-id",t),document.querySelector(".see_task_wrapper").setAttribute("data-taskid",r)})),y.addEventListener("click",(e=>{const t=e.target.closest(".parent_wrapper").getAttribute("data-id"),o=e.target.closest(".todo_item_wrapper").getAttribute("data-taskid");document.querySelector(".edit_task").reset(),document.querySelector(".dim_screen_container").classList.remove("hide"),document.querySelector(".edit_task_wrapper").classList.remove("hide"),document.querySelector(".edit_task_wrapper").setAttribute("data-id",t),document.querySelector(".edit_task_wrapper").setAttribute("data-taskid",o)})),n.append(i),i.append(l),i.append(y),l.append(u),l.append(g),u.append(p),u.append(_),p.append(m),y.append(k)}}function a(){document.getElementById("todo_container").setAttribute("data-id","none"),document.querySelector(".add_todo_wrapper")&&document.querySelector(".add_todo_wrapper").remove(),document.querySelectorAll(".todo_item_wrapper").forEach((e=>{e.remove()}))}function s(e){o.projects.splice(e,1),d.updateProjectId()}return{displayProjects:function c(){document.querySelector(".all_project_items_wrapper").remove();const n=document.createElement("div");n.classList.add("all_project_items_wrapper");for(let i=0;i<o.projects.length;i++){const l=document.createElement("div");l.classList.add("projects_item_wrapper"),l.classList.add("parent_wrapper"),l.setAttribute("data-id",o.projects[i].id);const u=document.createElement("p");u.classList.add("projects_item_label"),u.textContent=o.projects[i]._name,u.addEventListener("click",(t=>{a(),e(t.target.closest(".parent_wrapper").getAttribute("data-id")),r(t.target.closest(".parent_wrapper").getAttribute("data-id"))}));const p=document.createElement("div");p.classList.add("projects_item_delete_button"),p.classList.add("btn"),p.textContent="-",p.setAttribute("data-id",o.projects[i].id),p.addEventListener("click",(o=>{const n=o.target.closest(".parent_wrapper").getAttribute("data-id"),i=document.getElementById("todo_container").getAttribute("data-id");if(s(n),c(),"all"==i)a(),t();else if(n===i)a(),t();else if(Number(n)<Number(i)){const t=(Number(i)-1).toString();a(),e(t),r(t)}d.updateStorage()})),l.append(u),l.append(p),n.append(l)}document.getElementById("projects_container").append(n)},deleteProject:s,removeTasks:a,displayAllTask:r,displayTodoProjectName:e,displayDefault:t}}(),d={addProject:function(){const t=document.querySelector(".project_name_input").value;""!=t&&o.projects.push(new e(t,o.projects.length))},addTask:function(e){const r=document.querySelector(".todo_name").value,d=document.querySelector(".todo_description").value,a=document.querySelector(".todo_date").value;let s="";document.querySelector(".todo_priority1").checked?s="1":document.querySelector(".todo_priority2").checked?s="2":document.querySelector(".todo_priority3").checked?s="3":document.querySelector(".todo_priority4").checked&&(s="4"),""!=r&&""!=d&&""!=a&&""!=s&&o.projects[e].tasks.push(new t(r,d,a,s))},updateProjectId:function(){if(0==o.projects.length)return;const e=document.querySelectorAll(".projects_item_wrapper");for(let t=0;t<o.projects.length;t++)o.projects[t].id=t,e[t].setAttribute("data-id",o.projects[t].id),console.log("updated")},deleteTask:function(e,t){o.projects[e].tasks.splice(t,1)},editTask:function(e){const t=e.target.closest(".parent_wrapper").getAttribute("data-id"),r=document.querySelector(".edit_task_wrapper").getAttribute("data-taskid"),d=document.querySelector(".edit_name").value,a=document.querySelector(".edit_description").value,s=document.querySelector(".edit_date").value;let c="";document.querySelector(".edit_priority1").checked?c="1":document.querySelector(".edit_priority2").checked?c="2":document.querySelector(".edit_priority3").checked?c="3":document.querySelector(".edit_priority4").checked&&(c="4"),""!=d&&""!=a&&""!=s&&""!=c&&(o.projects[t].tasks[r]._priority=c,o.projects[t].tasks[r]._title=d,o.projects[t].tasks[r]._description=a,o.projects[t].tasks[r]._date=s)},updateStorage:function(){localStorage.setItem("projects",JSON.stringify(o.projects)),console.log("projects stored in localStorage")},getStorage:function(){o.projects=JSON.parse(localStorage.getItem("projects"))},emptyStorage:function(){localStorage.clear(),console.log("storage cleared")}},a=function(){const e=document.querySelector(".dim_screen_container");e.addEventListener("click",(t=>{console.log("clicked document"),e.classList.add("hide"),document.querySelectorAll(".form").forEach((e=>{e.classList.add("hide"),e.addEventListener("click",(e=>{e.stopPropagation()}))}))})),document.querySelector(".add_project_form_button").addEventListener("click",(()=>{d.addProject(),r.displayProjects(),document.querySelector(".dim_screen_container").classList.add("hide"),document.querySelector(".add_project_form_container").classList.add("hide"),d.updateStorage()})),document.querySelector(".add_todo_form_button").addEventListener("click",(e=>{const t=document.getElementById("todo_container").getAttribute("data-id");d.addTask(t),r.removeTasks(),r.displayTodoProjectName(t),r.displayAllTask(t),document.querySelector(".dim_screen_container").classList.add("hide"),document.querySelector(".add_todo_form_container").classList.add("hide"),d.updateStorage()})),document.querySelector(".add_projects_button").addEventListener("click",(e=>{document.querySelector(".add_project_form").reset(),document.querySelector(".dim_screen_container").classList.remove("hide"),document.querySelector(".add_project_form_container").classList.remove("hide"),e.stopPropagation()})),document.querySelector(".edit_task_button").addEventListener("click",(e=>{const t=e.target.closest(".parent_wrapper").getAttribute("data-id");d.editTask(e),"all"==document.getElementById("todo_container").getAttribute("data-id")?(r.removeTasks(),r.displayDefault()):(r.removeTasks(),r.displayTodoProjectName(t),r.displayAllTask(t)),document.querySelector(".edit_task_wrapper").classList.add("hide"),document.querySelector(".dim_screen_container").classList.add("hide"),d.updateStorage()})),document.querySelector(".see_task_edit_button").addEventListener("click",(e=>{const t=document.querySelector(".see_task_wrapper").getAttribute("data-id"),o=document.querySelector(".see_task_wrapper").getAttribute("data-taskid");document.querySelector(".edit_task").reset(),document.querySelector(".see_task_wrapper").classList.add("hide"),document.querySelector(".edit_task_wrapper").classList.remove("hide"),document.querySelector(".edit_task_wrapper").setAttribute("data-id",t),document.querySelector(".edit_task_wrapper").setAttribute("data-taskid",o),e.stopPropagation()})),document.querySelectorAll(".close_buttons").forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".parent_wrapper").classList.add("hide"),e.target.closest(".dim_screen_container").classList.add("hide")}))}))};JSON.parse(localStorage.getItem("projects"))?(console.log("storage has projects"),d.getStorage()):(console.log("storage empty"),d.updateStorage()),window.methods=d,window.data=o,a(),r.removeTasks(),r.displayProjects(),r.displayDefault()})();